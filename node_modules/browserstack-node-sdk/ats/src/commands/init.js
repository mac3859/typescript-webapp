const a12_0x45bbb7=a12_0x3e63;function a12_0x3e63(_0x3ca7f5,_0x12b725){const _0x589ae3=a12_0x589a();return a12_0x3e63=function(_0x3e63ac,_0x38147e){_0x3e63ac=_0x3e63ac-0xed;let _0x4711d4=_0x589ae3[_0x3e63ac];return _0x4711d4;},a12_0x3e63(_0x3ca7f5,_0x12b725);}function a12_0x589a(){const _0x2e7404=['oCbUQ','bibmz','description','options','mkdirSync','stringify','init','UCQhW','error','FtHeD','ERROR','3tKfjwo','wdprE','/automate/plan.json','yStas','ZpFQF','EGZhB','env','QWbAQ','Mbbin','ENVGh','statusCode','writeFileSync','bstack-username','AhxwC','recommendCommands','KpAGr','Initialise\x20the\x20BrowserStack\x20CLI\x20with\x20appropriate\x20credentials.','Pxwdw','YtBRk','AxmrA','BrowserStack\x20username\x20and\x20password\x20neither\x20passed\x20in\x20command\x20line\x20arguments\x20nor\x20set\x20as\x20environment\x20variables.\x20Raising\x20a\x20prompt\x20to\x20get\x20the\x20details.','https://','Use\x20username\x20to\x20configure\x20the\x20CLI\x20for\x20future\x20actions.','type','strict','help','224CBVWeO','command','exit','10797584bYObXA','cZNtV','unknown-error','2870548JcUdvz','Rpabn','bstackUsername','Browserstack','OymZb','NHyOV','rjNWL','bstackAccesskey','password','util','Wrong\x20credentials\x20passed.\x20Please\x20try\x20again\x20with\x20correct\x20credentials!','150768eHGdVH','wrong-creds','Use\x20corresponding\x20access-key\x20to\x20configure\x20the\x20CLI\x20for\x20future\x20actions.','aTTkO','1485768dvBoCE','iHNqZ','usage','15363765nqUpEU','../utils/userInput','GET','epilogue','mZvHL','bstack-accesskey','YhQnd','debug','parse','CyKon','utf-8','mhoej','readFileSync','qLqmD','DKPCb','pZUmz','INFO','RbSFN','EiqbY','../utils/utilityMethods','WizbT','argv','JRnka','BROWSERSTACK_USERNAME','IQDar','SKgXL','requestId','string','../utils/instrumentationUtils','BROWSERSTACK_ACCESS_KEY','desc','4925950cNDahT','qoKSK','392048noknKr','lqeCa','MsnLG','NPimr','existsSync','wDhbn'];a12_0x589a=function(){return _0x2e7404;};return a12_0x589a();}(function(_0x29c04b,_0x2c535f){const _0x1f56d1=a12_0x3e63,_0x104d37=_0x29c04b();while(!![]){try{const _0x1c63ed=parseInt(_0x1f56d1(0x14f))/0x1+-parseInt(_0x1f56d1(0x12b))/0x2+parseInt(_0x1f56d1(0xfc))/0x3*(parseInt(_0x1f56d1(0x11c))/0x4)+parseInt(_0x1f56d1(0x14d))/0x5+-parseInt(_0x1f56d1(0x127))/0x6*(parseInt(_0x1f56d1(0x116))/0x7)+-parseInt(_0x1f56d1(0x119))/0x8+parseInt(_0x1f56d1(0x12e))/0x9;if(_0x1c63ed===_0x2c535f)break;else _0x104d37['push'](_0x104d37['shift']());}catch(_0x2155f4){_0x104d37['push'](_0x104d37['shift']());}}}(a12_0x589a,0xdd042));const fs=require('fs'),util=require(a12_0x45bbb7(0x125)),got=require('got'),{v4:uuidv4}=require('uuid'),{logger}=require('../config/logger'),{inputBstackKeys}=require(a12_0x45bbb7(0x12f)),{BS_API_URL,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,global_registry,messageTypes}=require('../config/constants'),{getDirForConfig,getCredentialsPath,getAuthHeader}=require(a12_0x45bbb7(0x141)),{sendInstrumentationEvent}=require(a12_0x45bbb7(0x14a));exports[a12_0x45bbb7(0x117)]=a12_0x45bbb7(0xf7),exports[a12_0x45bbb7(0x14c)]=a12_0x45bbb7(0x10c),exports['builder']=function(_0x40eb87){const _0x13f7b8=a12_0x45bbb7,_0x520dc9={};_0x520dc9['IWhDM']=_0x13f7b8(0x112),_0x520dc9[_0x13f7b8(0x139)]=_0x13f7b8(0x149),_0x520dc9[_0x13f7b8(0x142)]=_0x13f7b8(0x129),_0x520dc9[_0x13f7b8(0x11a)]=_0x13f7b8(0x115);const _0x547483=_0x520dc9,_0x19ba91={};_0x19ba91[_0x13f7b8(0xf3)]=_0x547483['IWhDM'],_0x19ba91['type']=_0x547483[_0x13f7b8(0x139)];const _0x135616={};_0x135616[_0x13f7b8(0xf3)]=_0x547483['WizbT'],_0x135616[_0x13f7b8(0x113)]=_0x547483[_0x13f7b8(0x139)];const _0x5a292e={};return _0x5a292e[_0x13f7b8(0x108)]=_0x19ba91,_0x5a292e[_0x13f7b8(0x133)]=_0x135616,_0x40eb87[_0x13f7b8(0x12d)](HELP_HEADER_MESSAGE['init'])[_0x13f7b8(0x131)](HELP_FOOTER_MESSAGE)['options'](_0x5a292e)[_0x13f7b8(0x10a)]()[_0x13f7b8(0x114)]()[_0x13f7b8(0x115)](_0x547483[_0x13f7b8(0x11a)])[_0x13f7b8(0x143)];},exports['handler']=async function(_0x306702){const _0x5cfe61=a12_0x45bbb7,_0x53ab21={'wdprE':_0x5cfe61(0x112),'yStas':_0x5cfe61(0x149),'IQDar':_0x5cfe61(0x129),'iHNqZ':'help','JRnka':function(_0x4057d0){return _0x4057d0();},'KpAGr':_0x5cfe61(0x138),'mZvHL':function(_0x2643e5,_0x56c268,_0x38b697,_0x4d9d53,_0x555450,_0xb1b615,_0x200d04){return _0x2643e5(_0x56c268,_0x38b697,_0x4d9d53,_0x555450,_0xb1b615,_0x200d04);},'CyKon':'init-called','wDhbn':function(_0x1bd356,_0x683717){return _0x1bd356!==_0x683717;},'SKgXL':_0x5cfe61(0x10e),'ABLIX':'nUejQ','EGZhB':function(_0x2e01cd,_0x3149c5){return _0x2e01cd===_0x3149c5;},'ZpFQF':'fCSHV','Pxwdw':function(_0x1f8cea,_0x59a244){return _0x1f8cea!==_0x59a244;},'DKPCb':'lmJhH','AhxwC':_0x5cfe61(0x150),'aTTkO':'AykEy','rjNWL':_0x5cfe61(0xfa),'NHyOV':function(_0x167f88,_0x4cfc7e){return _0x167f88===_0x4cfc7e;},'Luwjn':function(_0x1a34cc,_0x1ef5b9){return _0x1a34cc===_0x1ef5b9;},'YhQnd':_0x5cfe61(0xf2),'uiFJr':_0x5cfe61(0x110),'EiqbY':_0x5cfe61(0x130),'oCbUQ':function(_0x31ed12,_0x43561b,_0xa62eb6){return _0x31ed12(_0x43561b,_0xa62eb6);},'Rpabn':function(_0x20adc2,_0x1e84b4,_0xe94496){return _0x20adc2(_0x1e84b4,_0xe94496);},'GwsbJ':function(_0x15172b,_0x249da5){return _0x15172b!==_0x249da5;},'NPimr':function(_0x292608,_0x580bc9){return _0x292608!==_0x580bc9;},'QWbAQ':_0x5cfe61(0x10f),'pZUmz':function(_0x57c121,_0x1a8bf1){return _0x57c121===_0x1a8bf1;},'MsnLG':_0x5cfe61(0x120),'ENVGh':function(_0x2abdf3){return _0x2abdf3();},'Mbbin':function(_0x44a8a2,_0x544343){return _0x44a8a2===_0x544343;},'qLqmD':_0x5cfe61(0x13f),'Qkkiy':_0x5cfe61(0x126),'UCQhW':function(_0x27033d,_0x4e4e88,_0x57934a,_0xe42846,_0x3c50bd,_0x28c582,_0x5b98bb){return _0x27033d(_0x4e4e88,_0x57934a,_0xe42846,_0x3c50bd,_0x28c582,_0x5b98bb);},'qoKSK':_0x5cfe61(0x128),'vhuyT':_0x5cfe61(0x11b)};try{global_registry[_0x5cfe61(0x148)]=_0x53ab21['JRnka'](uuidv4),_0x53ab21[_0x5cfe61(0x132)](sendInstrumentationEvent,_0x306702,_0x53ab21[_0x5cfe61(0x137)],messageTypes[_0x5cfe61(0x13e)],null,null,_0x306702);const _0x30c5d2=_0x53ab21[_0x5cfe61(0x144)](getDirForConfig);!fs[_0x5cfe61(0xef)](_0x30c5d2)&&(_0x53ab21['wDhbn'](_0x53ab21[_0x5cfe61(0x147)],_0x53ab21['ABLIX'])?fs['mkdirSync'](_0x30c5d2):_0x197c07[_0x5cfe61(0xf5)](_0x5f192a));let _0x28ea47,_0x1b8934;process[_0x5cfe61(0x102)]['BROWSERSTACK_USERNAME']&&(_0x53ab21[_0x5cfe61(0x101)](_0x53ab21[_0x5cfe61(0x100)],_0x53ab21[_0x5cfe61(0x100)])?_0x28ea47=process[_0x5cfe61(0x102)]['BROWSERSTACK_USERNAME']:_0x54780c=_0x59003e[_0x5cfe61(0x123)]);if(process[_0x5cfe61(0x102)]['BROWSERSTACK_ACCESS_KEY']){if(_0x53ab21[_0x5cfe61(0x10d)](_0x53ab21[_0x5cfe61(0x13c)],_0x53ab21['DKPCb'])){const _0x28e4f0={};_0x28e4f0[_0x5cfe61(0xf3)]=_0x53ab21[_0x5cfe61(0xfd)],_0x28e4f0[_0x5cfe61(0x113)]=_0x53ab21[_0x5cfe61(0xff)];const _0x1e11e1={};_0x1e11e1[_0x5cfe61(0xf3)]=_0x53ab21[_0x5cfe61(0x146)],_0x1e11e1[_0x5cfe61(0x113)]=_0x53ab21[_0x5cfe61(0xff)];const _0x633d6={};return _0x633d6[_0x5cfe61(0x108)]=_0x28e4f0,_0x633d6[_0x5cfe61(0x133)]=_0x1e11e1,_0x304160[_0x5cfe61(0x12d)](_0x5fdf1f[_0x5cfe61(0xf7)])[_0x5cfe61(0x131)](_0x3a889e)[_0x5cfe61(0xf4)](_0x633d6)[_0x5cfe61(0x10a)]()[_0x5cfe61(0x114)]()[_0x5cfe61(0x115)](_0x53ab21[_0x5cfe61(0x12c)])[_0x5cfe61(0x143)];}else _0x1b8934=process[_0x5cfe61(0x102)][_0x5cfe61(0x14b)];}_0x306702[_0x5cfe61(0x11e)]&&(_0x53ab21[_0x5cfe61(0x101)](_0x53ab21[_0x5cfe61(0x109)],_0x53ab21[_0x5cfe61(0x12a)])?_0x1eab6c=_0x521aaa[_0x5cfe61(0x11e)]:_0x28ea47=_0x306702[_0x5cfe61(0x11e)]);if(_0x306702[_0x5cfe61(0x123)]){if(_0x53ab21[_0x5cfe61(0x10d)](_0x53ab21[_0x5cfe61(0x122)],_0x53ab21['rjNWL'])){let _0x51da20={};const _0xe37afb=_0x53ab21[_0x5cfe61(0x144)](_0x39da6f);_0x1638b3[_0x5cfe61(0xef)](_0xe37afb)&&(_0x51da20=_0x35628c[_0x5cfe61(0x136)](_0x27481a[_0x5cfe61(0x13a)](_0xe37afb,_0x53ab21[_0x5cfe61(0x10b)])));const _0x1013c2={};_0x1013c2['username']=_0x4ecedf,_0x1013c2[_0x5cfe61(0x124)]=_0x515b8e,_0x51da20[_0x5cfe61(0x11f)]=_0x1013c2,_0x151a32[_0x5cfe61(0x107)](_0xe37afb,_0x39080c[_0x5cfe61(0xf6)](_0x51da20)),_0x3d19c0[_0x5cfe61(0x118)](0x0);}else _0x1b8934=_0x306702['bstackAccesskey'];}if(_0x53ab21[_0x5cfe61(0x121)](_0x28ea47,undefined)||_0x53ab21['Luwjn'](_0x1b8934,undefined)){if(_0x53ab21[_0x5cfe61(0x10d)](_0x53ab21[_0x5cfe61(0x134)],_0x53ab21[_0x5cfe61(0x134)]))_0x16a371=!![];else{logger[_0x5cfe61(0x135)](_0x53ab21['uiFJr']);const [_0x233ae7,_0x459156]=await _0x53ab21[_0x5cfe61(0x144)](inputBstackKeys);_0x28ea47=_0x233ae7,_0x1b8934=_0x459156;}}let _0x50cfb2=![];const _0x5f5c15=_0x5cfe61(0x111)+_0x28ea47+':'+_0x1b8934+'@'+BS_API_URL+_0x5cfe61(0xfe),_0x11fa73={'method':_0x53ab21[_0x5cfe61(0x140)],'headers':_0x53ab21[_0x5cfe61(0xf1)](getAuthHeader,_0x28ea47,_0x1b8934),'throwHttpErrors':![]},_0x1b400=await _0x53ab21[_0x5cfe61(0x11d)](got,_0x5f5c15,_0x11fa73);_0x53ab21[_0x5cfe61(0xf0)](_0x1b400,null)&&_0x53ab21['GwsbJ'](_0x1b400,undefined)&&_0x53ab21[_0x5cfe61(0x101)](_0x1b400[_0x5cfe61(0x106)],0xc8)&&(_0x53ab21[_0x5cfe61(0xee)](_0x53ab21[_0x5cfe61(0x103)],_0x53ab21[_0x5cfe61(0x103)])?_0x21949c=_0x70b90e[_0x5cfe61(0x102)][_0x5cfe61(0x145)]:_0x50cfb2=!![]);if(_0x50cfb2){if(_0x53ab21[_0x5cfe61(0x13d)](_0x53ab21[_0x5cfe61(0xed)],_0x53ab21['MsnLG'])){let _0xfde86a={};const _0x595650=_0x53ab21[_0x5cfe61(0x105)](getCredentialsPath);fs[_0x5cfe61(0xef)](_0x595650)&&(_0x53ab21[_0x5cfe61(0x104)](_0x53ab21[_0x5cfe61(0x13b)],_0x53ab21['qLqmD'])?_0xfde86a=JSON[_0x5cfe61(0x136)](fs['readFileSync'](_0x595650,_0x53ab21[_0x5cfe61(0x10b)])):_0x2ac32d=_0x50975c[_0x5cfe61(0x102)][_0x5cfe61(0x14b)]);const _0x220b5a={};_0x220b5a['username']=_0x28ea47,_0x220b5a[_0x5cfe61(0x124)]=_0x1b8934,_0xfde86a[_0x5cfe61(0x11f)]=_0x220b5a,fs[_0x5cfe61(0x107)](_0x595650,JSON[_0x5cfe61(0xf6)](_0xfde86a)),process[_0x5cfe61(0x118)](0x0);}else _0x460d2d=_0x12ea26[_0x5cfe61(0x136)](_0x28997e[_0x5cfe61(0x13a)](_0x3c9921,_0x53ab21[_0x5cfe61(0x10b)]));}else logger[_0x5cfe61(0xf9)](_0x53ab21['Qkkiy']),await _0x53ab21[_0x5cfe61(0xf8)](sendInstrumentationEvent,_0x306702,_0x53ab21[_0x5cfe61(0x137)],messageTypes['ERROR'],_0x53ab21[_0x5cfe61(0x14e)],null,_0x306702),process[_0x5cfe61(0x118)](0x1);}catch(_0x34ba1a){logger[_0x5cfe61(0xf9)](_0x34ba1a['stack']),await _0x53ab21[_0x5cfe61(0x132)](sendInstrumentationEvent,_0x306702,_0x53ab21[_0x5cfe61(0x137)],messageTypes[_0x5cfe61(0xfb)],_0x53ab21['vhuyT'],_0x34ba1a,_0x306702),process['exit'](0x1);}};