const a24_0x8b2648=a24_0x4dac;(function(_0x2e43ad,_0x2af066){const _0x41d987=a24_0x4dac,_0x179142=_0x2e43ad();while(!![]){try{const _0x4036c5=parseInt(_0x41d987(0x16f))/0x1*(-parseInt(_0x41d987(0x19b))/0x2)+-parseInt(_0x41d987(0x19c))/0x3+-parseInt(_0x41d987(0x16c))/0x4+-parseInt(_0x41d987(0x183))/0x5*(-parseInt(_0x41d987(0x191))/0x6)+parseInt(_0x41d987(0x192))/0x7+-parseInt(_0x41d987(0x18d))/0x8+parseInt(_0x41d987(0x186))/0x9;if(_0x4036c5===_0x2af066)break;else _0x179142['push'](_0x179142['shift']());}catch(_0x15f915){_0x179142['push'](_0x179142['shift']());}}}(a24_0x4015,0x2ec92));function a24_0x4015(){const _0x455697=['rCNjC','127kvSDlq','yIHbQ','promisifyAll','TIJAu','Resources','TemplateBody','createStack','valueOf','push','load','CAPABILITY_NAMED_IAM','../config/constants','toString','ClusterName','CloudFormation','OEMpZ','templates','schema','xYCWq','AvwQg','10IsJkdh','./AWSUtils','StackName','2598138SWuxux','gHdhF','StackId','awsObj','Key','bluebird','browserstack:cluster','2117568FrKDEi','utf-8','2010-05-15','TQqcj','972222kXXFli','2644747kBeXbo','js-yaml','path','stackCreateComplete','Capabilities','promise','Tags','DELETE','js-yaml-cloudformation-schema','766GppLmM','467904dKckmQ','jorcj','Parameters','Properties','browserstack:creationDate','pTmCU','join','vuMuH','apiVersion','1318552qNwzcU','waitFor'];a24_0x4015=function(){return _0x455697;};return a24_0x4015();}const fs=require('fs'),path=require(a24_0x8b2648(0x194)),yaml=require(a24_0x8b2648(0x193)),{CLOUDFORMATION_SCHEMA}=require(a24_0x8b2648(0x19a)),Promise=require(a24_0x8b2648(0x18b)),AWS=require(a24_0x8b2648(0x184))[a24_0x8b2648(0x189)],{CLUSTER_AUTOSCALER_STACK_NAME,COMMON_HST_TAGS}=require(a24_0x8b2648(0x17a)),{logger}=require('../config/logger');Promise[a24_0x8b2648(0x171)](fs);const addAutoscalerTags=async(_0x542619,_0xbfaa41,_0x4000b7)=>{const _0x33c102=a24_0x8b2648;for(const _0x132396 in _0x542619[_0x33c102(0x173)]){_0x542619[_0x33c102(0x173)][_0x132396][_0x33c102(0x166)]&&_0x542619[_0x33c102(0x173)][_0x132396]['Properties'][_0x33c102(0x198)]&&_0x542619[_0x33c102(0x173)][_0x132396][_0x33c102(0x166)][_0x33c102(0x198)][_0x33c102(0x177)](..._0x4000b7);}};function a24_0x4dac(_0xda3596,_0x224f02){const _0x401525=a24_0x4015();return a24_0x4dac=function(_0x4dacd3,_0x1c7908){_0x4dacd3=_0x4dacd3-0x165;let _0x17004f=_0x401525[_0x4dacd3];return _0x17004f;},a24_0x4dac(_0xda3596,_0x224f02);}exports['createAutoscalerStack']=async _0x229db2=>{const _0x28de8c=a24_0x8b2648,_0x2b9121={'TIJAu':_0x28de8c(0x18c),'rCNjC':_0x28de8c(0x167),'pTmCU':_0x28de8c(0x18f),'jZpIG':_0x28de8c(0x17f),'gHdhF':'autoscaler-role-creation.yaml','xYCWq':_0x28de8c(0x18e),'TQqcj':function(_0x42f932,_0xe641a5,_0x505e2b,_0x3bb40a){return _0x42f932(_0xe641a5,_0x505e2b,_0x3bb40a);},'OEMpZ':_0x28de8c(0x199),'yIHbQ':_0x28de8c(0x17c),'vuMuH':_0x28de8c(0x179),'AvwQg':'Waiting\x20for\x20CloudFormation\x20stack\x20to\x20complete','jorcj':_0x28de8c(0x195)},_0x4c401c=COMMON_HST_TAGS,_0x4b361a={};_0x4b361a[_0x28de8c(0x18a)]=_0x2b9121[_0x28de8c(0x172)],_0x4b361a['Value']=_0x229db2,_0x4c401c[_0x28de8c(0x177)](_0x4b361a),_0x4c401c['push']({'Key':_0x2b9121[_0x28de8c(0x16e)],'Value':new Date()[_0x28de8c(0x176)]()[_0x28de8c(0x17b)]()});const _0x1b6599={};_0x1b6599[_0x28de8c(0x16b)]=_0x2b9121[_0x28de8c(0x168)];const _0x221c0b=new AWS[(_0x28de8c(0x17d))](_0x1b6599),_0x14e09d=await fs['readFileAsync'](path[_0x28de8c(0x169)](__dirname,'..',_0x2b9121['jZpIG'],_0x2b9121[_0x28de8c(0x187)]),_0x2b9121[_0x28de8c(0x181)]),_0x4141ff={};_0x4141ff[_0x28de8c(0x180)]=CLOUDFORMATION_SCHEMA;const _0x3f53cd=yaml[_0x28de8c(0x178)](_0x14e09d,_0x4141ff);_0x2b9121[_0x28de8c(0x190)](addAutoscalerTags,_0x3f53cd,_0x229db2,_0x4c401c);const _0x1426f3=JSON['stringify'](_0x3f53cd),_0x44a976={};_0x44a976[_0x28de8c(0x185)]=CLUSTER_AUTOSCALER_STACK_NAME+'-'+_0x229db2,_0x44a976['OnFailure']=_0x2b9121[_0x28de8c(0x17e)],_0x44a976[_0x28de8c(0x174)]=_0x1426f3,_0x44a976[_0x28de8c(0x165)]=[{'ParameterKey':_0x2b9121[_0x28de8c(0x170)],'ParameterValue':_0x229db2}],_0x44a976[_0x28de8c(0x196)]=[_0x2b9121[_0x28de8c(0x16a)]],_0x44a976['Tags']=_0x4c401c;const _0x18fdde=_0x44a976,_0x2aaf5d=await _0x221c0b[_0x28de8c(0x175)](_0x18fdde)[_0x28de8c(0x197)]();logger['debug'](_0x2b9121[_0x28de8c(0x182)]);const _0x5ecd25={};return _0x5ecd25[_0x28de8c(0x185)]=_0x2aaf5d[_0x28de8c(0x188)],_0x221c0b[_0x28de8c(0x16d)](_0x2b9121[_0x28de8c(0x19d)],_0x5ecd25)[_0x28de8c(0x197)]();};