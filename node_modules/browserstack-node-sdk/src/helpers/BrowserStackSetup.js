const a55_0x2f6a2c=a55_0x2648;function a55_0x2648(_0x46201a,_0x456a9a){const _0x72f1e4=a55_0x72f1();return a55_0x2648=function(_0x264811,_0x1729f9){_0x264811=_0x264811-0x120;let _0x2f26a7=_0x72f1e4[_0x264811];return _0x2f26a7;},a55_0x2648(_0x46201a,_0x456a9a);}(function(_0x1d6d86,_0x1c9d9d){const _0x4c2710=a55_0x2648,_0x504343=_0x1d6d86();while(!![]){try{const _0x548607=parseInt(_0x4c2710(0x1ff))/0x1*(-parseInt(_0x4c2710(0x189))/0x2)+parseInt(_0x4c2710(0x1ce))/0x3+parseInt(_0x4c2710(0x1eb))/0x4+-parseInt(_0x4c2710(0x128))/0x5+parseInt(_0x4c2710(0x1c3))/0x6*(parseInt(_0x4c2710(0x15f))/0x7)+parseInt(_0x4c2710(0x222))/0x8+parseInt(_0x4c2710(0x13d))/0x9;if(_0x548607===_0x1c9d9d)break;else _0x504343['push'](_0x504343['shift']());}catch(_0x1e9861){_0x504343['push'](_0x504343['shift']());}}}(a55_0x72f1,0x447fc));const util=require(a55_0x2f6a2c(0x207)),os=require('os'),path=require(a55_0x2f6a2c(0x157)),{v4:uuidv4}=require(a55_0x2f6a2c(0x1e2)),fs=require('fs'),constants=require(a55_0x2f6a2c(0x204)),{isTurboScaleSession}=require(a55_0x2f6a2c(0x1ee)),logger=require('./logger')[a55_0x2f6a2c(0x13a)],helper=require(a55_0x2f6a2c(0x1a2)),utilities=require('./utilities'),percyHelper=require(a55_0x2f6a2c(0x1cc)),hubAllocator=require(a55_0x2f6a2c(0x138)),PerformanceTester=require(a55_0x2f6a2c(0x14b)),{EVENTS:PerformanceEvents,AUTOMATE_EVENTS:PerformanceAutEvents}=require(a55_0x2f6a2c(0x21d)),{setPercyFlag}=require(a55_0x2f6a2c(0x1d5)),TestHubHandler=require('./testhub/testhubHandler'),timeoutPromise=require('./timeoutPromise');class BrowserStackSetup{constructor(_0x3da0c9,_0x5271cf){const _0x55e484=a55_0x2f6a2c,_0x1a0a79={'RBTre':_0x55e484(0x1e5),'ovFLK':function(_0x15cb7,_0x16cfe6){return _0x15cb7!==_0x16cfe6;},'zClaz':'win32','QiBFz':_0x55e484(0x21b),'YkaxC':_0x55e484(0x1f7),'kCCfL':'SIGBREAK','BlECv':function(_0x71753,_0x186249){return _0x71753===_0x186249;},'WIsUN':_0x55e484(0x1df),'eXqvK':_0x55e484(0x16e),'cFdjk':function(_0x4ded0e){return _0x4ded0e();},'qrnzS':_0x55e484(0x1f0),'AwRlZ':_0x55e484(0x1f1),'hQAem':'SIGINT','IHoBF':function(_0x21867d,_0x39c9a8){return _0x21867d<_0x39c9a8;},'snFrt':function(_0x9fc473,_0xc235ba){return _0x9fc473(_0xc235ba);},'nJcoj':_0x55e484(0x133),'TjqCj':function(_0x346115,_0x12653c){return _0x346115===_0x12653c;},'tuAmj':_0x55e484(0x1f2),'QaHzy':_0x55e484(0x1be),'QiOUL':_0x55e484(0x1b8),'cyqqA':_0x55e484(0x153),'TVORv':_0x55e484(0x187),'dgaPJ':_0x55e484(0x126)},_0x3bd508=_0x1a0a79[_0x55e484(0x1b1)][_0x55e484(0x1af)]('|');let _0x238678=0x0;while(!![]){switch(_0x3bd508[_0x238678++]){case'0':helper[_0x55e484(0x201)](this[_0x55e484(0x1f3)]);continue;case'1':!this[_0x55e484(0x1f3)][_0x55e484(0x19d)]&&logger[_0x55e484(0x1a3)](constants[_0x55e484(0x21c)]);continue;case'2':this[_0x55e484(0x1f3)][_0x55e484(0x171)][_0x55e484(0x1d2)]=helper[_0x55e484(0x194)](this[_0x55e484(0x1f3)]['browserStackLocalOptions']['skipBinaryInitialisation']);continue;case'3':process['env']['BROWSERSTACK_TURBOSCALE']&&(this[_0x55e484(0x1f3)][_0x55e484(0x190)]=helper['isTrue'](process['env'][_0x55e484(0x1f5)]),this[_0x55e484(0x1f3)]['turboScaleOptions']=this[_0x55e484(0x1f3)]['turboScaleOptions']||{});continue;case'4':this[_0x55e484(0x155)]={};continue;case'5':this[_0x55e484(0x1f3)][_0x55e484(0x1b0)]=this['config'][_0x55e484(0x1b0)]||{};continue;case'6':_0x1a0a79[_0x55e484(0x221)](process[_0x55e484(0x1ec)],_0x1a0a79['zClaz'])?(process['on'](_0x1a0a79[_0x55e484(0x1cb)],this[_0x55e484(0x156)]),process['on'](_0x1a0a79[_0x55e484(0x16f)],this['intExitHandler'])):process['on'](_0x1a0a79[_0x55e484(0x146)],this[_0x55e484(0x156)]);continue;case'7':this[_0x55e484(0x17a)]();continue;case'8':helper[_0x55e484(0x1e3)](this[_0x55e484(0x1f3)],this[_0x55e484(0x1d4)],this[_0x55e484(0x13b)]);continue;case'9':this[_0x55e484(0x1f3)][_0x55e484(0x1b0)]['skipSessionName']=!helper['isBrowserstackInfra']()||helper['isTrue'](this['config'][_0x55e484(0x1b0)][_0x55e484(0x149)]);continue;case'10':!this[_0x55e484(0x1f3)][_0x55e484(0x171)]&&(this['config'][_0x55e484(0x171)]=this[_0x55e484(0x1f3)]['localOptions']||{});continue;case'11':helper['getLocalConfig'](this['config'])&&helper['isUndefined'](helper[_0x55e484(0x1ef)](this[_0x55e484(0x1f3)]))&&(!helper[_0x55e484(0x168)](this[_0x55e484(0x1f3)][_0x55e484(0x171)])&&_0x1a0a79[_0x55e484(0x20d)](this[_0x55e484(0x1f3)][_0x55e484(0x171)][_0x55e484(0x1de)],Object)?!helper[_0x55e484(0x194)](this['config'][_0x55e484(0x171)][_0x55e484(0x1d2)])&&(this['config'][_0x55e484(0x171)][_0x55e484(0x1a7)]=helper[_0x55e484(0x1fc)]()):this[_0x55e484(0x1f3)][_0x55e484(0x171)]={'localIdentifier':helper['generateLocalIdentifier']()});continue;case'12':process['on'](_0x1a0a79[_0x55e484(0x18c)],this[_0x55e484(0x14f)]());continue;case'13':if(_0x1a0a79[_0x55e484(0x20d)](_0x5271cf,_0x1a0a79[_0x55e484(0x158)]))return;continue;case'14':!this['config'][_0x55e484(0x1b0)]&&(this['config'][_0x55e484(0x1b0)]={});continue;case'15':this[_0x55e484(0x1dc)]=_0x1a0a79[_0x55e484(0x1d3)](uuidv4);continue;case'16':global[_0x55e484(0x1e4)]=_0x5271cf;continue;case'17':helper[_0x55e484(0x130)](this[_0x55e484(0x1f3)]);continue;case'18':if(this['config']['error'])throw new Error(this[_0x55e484(0x1f3)][_0x55e484(0x166)]);continue;case'19':this['unhandledErrors']=[];continue;case'20':try{process[_0x55e484(0x21e)][_0x55e484(0x1f8)]=_0x3da0c9['_'][0x0],utilities[_0x55e484(0x17c)](_0x1a0a79[_0x55e484(0x140)],{},this[_0x55e484(0x1f3)],this[_0x55e484(0x1e4)]);}catch(_0x563cfb){logger[_0x55e484(0x180)](_0x55e484(0x1fe)+_0x563cfb);}continue;case'21':this['config']=helper[_0x55e484(0x139)](helper[_0x55e484(0x1a9)](_0x3da0c9));continue;case'22':helper[_0x55e484(0x163)](this[_0x55e484(0x1f3)],this[_0x55e484(0x1d4)],this[_0x55e484(0x13b)]);continue;case'23':process['on'](_0x1a0a79['AwRlZ'],this['intExitHandler']);continue;case'24':process['on'](_0x1a0a79[_0x55e484(0x167)],this[_0x55e484(0x156)]);continue;case'25':helper[_0x55e484(0x214)](_0x5271cf)&&(_0x1a0a79[_0x55e484(0x170)](_0x1a0a79[_0x55e484(0x223)](parseInt,helper['getPackageVersion'](_0x1a0a79[_0x55e484(0x1b9)])),0x3)&&(this['config'][_0x55e484(0x16c)]=![]),_0x1a0a79[_0x55e484(0x193)](helper['compareVersions'](helper[_0x55e484(0x17f)](_0x1a0a79[_0x55e484(0x1b9)]),_0x1a0a79[_0x55e484(0x1ad)]),0x1)&&(this[_0x55e484(0x1f3)]['useW3C']=!![]));continue;case'26':this[_0x55e484(0x1db)]=null;continue;case'27':this['percy']=null;continue;case'28':this[_0x55e484(0x1d4)]=helper['setCLICaps'](_0x3da0c9);continue;case'29':if(helper['isUndefined'](this[_0x55e484(0x1f3)]))throw new Error(_0x1a0a79[_0x55e484(0x123)]);continue;case'30':this[_0x55e484(0x1f3)][_0x55e484(0x1b0)]['skipSessionStatus']=!helper[_0x55e484(0x19a)]()||helper[_0x55e484(0x194)](this[_0x55e484(0x1f3)][_0x55e484(0x1b0)]['skipSessionStatus']);continue;case'31':this[_0x55e484(0x1e4)]=_0x5271cf;continue;case'32':this[_0x55e484(0x1e7)]=null;continue;case'33':this[_0x55e484(0x13b)]=helper[_0x55e484(0x1bb)]();continue;case'34':(helper[_0x55e484(0x168)](this[_0x55e484(0x1f3)]['platforms'])||helper['isUndefined'](this[_0x55e484(0x1f3)][_0x55e484(0x1bd)]['length']))&&(helper[_0x55e484(0x168)](this['config'][_0x55e484(0x178)])?logger['info'](_0x1a0a79[_0x55e484(0x213)]):logger['warn'](_0x1a0a79[_0x55e484(0x205)]),this['config'][_0x55e484(0x1bd)]=[]);continue;case'35':if(!helper[_0x55e484(0x19a)]()){try{process[_0x55e484(0x21e)][_0x55e484(0x1f8)]=_0x5271cf,utilities['fireFunnelTestEvent'](_0x1a0a79[_0x55e484(0x140)],{},this[_0x55e484(0x1f3)],this[_0x55e484(0x1e4)]);}catch(_0x479b4c){logger[_0x55e484(0x180)](_0x55e484(0x1fe)+_0x479b4c);}return;}continue;case'36':if(helper['isUndefined'](helper[_0x55e484(0x18a)](this[_0x55e484(0x1f3)]))||helper[_0x55e484(0x168)](helper[_0x55e484(0x19c)](this[_0x55e484(0x1f3)])))throw new Error(_0x1a0a79['TVORv']);continue;case'37':this[_0x55e484(0x1f3)][_0x55e484(0x1bd)]=this['config'][_0x55e484(0x1bd)]||[];continue;case'38':global['sdkRunID']=this[_0x55e484(0x1dc)];continue;case'39':this[_0x55e484(0x156)]=this[_0x55e484(0x156)][_0x55e484(0x19f)](this);continue;case'40':process['on'](_0x1a0a79[_0x55e484(0x1a5)],this['intExitHandler']);continue;case'41':helper[_0x55e484(0x1d8)](this['config'],this[_0x55e484(0x1d4)]);continue;case'42':global[_0x55e484(0x1f3)]=this[_0x55e484(0x1f3)];continue;}break;}}async[a55_0x2f6a2c(0x177)](){const _0x417081=a55_0x2f6a2c,_0x377ffa={'cYgJT':function(_0xf0b968,_0x4ba86b){return _0xf0b968(_0x4ba86b);},'QmptU':_0x417081(0x154),'lgBuL':_0x417081(0x1a0),'aSDUu':'true','PXKNa':function(_0x4910bf,_0x38328d){return _0x4910bf===_0x38328d;},'RSJkB':_0x417081(0x1d7),'akBoc':function(_0x425dae,_0x54cb70){return _0x425dae+_0x54cb70;},'fznFR':_0x417081(0x19b),'KIkco':function(_0x384b67,_0x28f680){return _0x384b67(_0x28f680);},'kTjdK':_0x417081(0x1e6),'OKSRG':function(_0x1ea26c,_0x4b980d){return _0x1ea26c(_0x4b980d);}};if(_0x377ffa[_0x417081(0x1f4)](isTurboScaleSession,this['config'])){const _0x15ba27=await helper[_0x417081(0x137)](this[_0x417081(0x1f3)]);this[_0x417081(0x1f3)][_0x417081(0x1d6)]=_0x15ba27,_0x15ba27[_0x417081(0x15c)]&&(this[_0x417081(0x1f3)]['browserstackLocal']=!![],this[_0x417081(0x1f3)][_0x417081(0x171)][_0x417081(0x1a7)]=_0x377ffa[_0x417081(0x196)],this['config']['browserStackLocalOptions'][_0x377ffa[_0x417081(0x152)]]=_0x15ba27[_0x417081(0x164)][_0x417081(0x173)](','),this[_0x417081(0x1f3)][_0x417081(0x171)][_0x417081(0x1ac)]=_0x377ffa[_0x417081(0x199)]),this[_0x417081(0x1f3)]['turboScaleUrl']=_0x15ba27[_0x417081(0x1c4)],this[_0x417081(0x1e4)]&&_0x377ffa[_0x417081(0x16b)](this[_0x417081(0x1e4)][_0x417081(0x211)](),_0x377ffa['RSJkB'])&&(this['config'][_0x417081(0x210)]=_0x377ffa[_0x417081(0x21a)](_0x15ba27[_0x417081(0x188)],_0x377ffa[_0x417081(0x1fb)])),constants[_0x417081(0x1dd)]=helper[_0x417081(0x1d9)](this['config']),logger[_0x417081(0x180)](_0x417081(0x127)+constants[_0x417081(0x1dd)]);}helper[_0x417081(0x202)](this[_0x417081(0x1f3)]),this[_0x417081(0x21f)](),_0x377ffa[_0x417081(0x184)](setPercyFlag,this),await this[_0x417081(0x18d)](),![_0x377ffa['kTjdK']][_0x417081(0x17e)](this[_0x417081(0x1e4)])&&!_0x377ffa[_0x417081(0x131)](isTurboScaleSession,this[_0x417081(0x1f3)])&&!process[_0x417081(0x21e)]['BROWSERSTACK_CENTRAL_USER']&&await this['setUpHubUrl']();}async['setupPercy'](){const _0x5e0e30=a55_0x2f6a2c,_0x389e3e={};_0x389e3e[_0x5e0e30(0x1c5)]=function(_0x3e5fa3,_0x2417ab){return _0x3e5fa3===_0x2417ab;},_0x389e3e[_0x5e0e30(0x215)]=_0x5e0e30(0x121),_0x389e3e['QMfcN']=_0x5e0e30(0x1f6),_0x389e3e[_0x5e0e30(0x195)]=_0x5e0e30(0x1ab),_0x389e3e[_0x5e0e30(0x18f)]=_0x5e0e30(0x1e9),_0x389e3e[_0x5e0e30(0x18e)]=_0x5e0e30(0x1df);const _0x56559b=_0x389e3e;if(helper[_0x5e0e30(0x194)](this['config'][_0x5e0e30(0x151)])&&(!this[_0x5e0e30(0x151)]||!this[_0x5e0e30(0x151)][_0x5e0e30(0x20f)]()))try{this[_0x5e0e30(0x151)]=await percyHelper[_0x5e0e30(0x1fd)](this[_0x5e0e30(0x1f3)]);if(!this[_0x5e0e30(0x151)]){process[_0x5e0e30(0x21e)][_0x5e0e30(0x14d)]=_0x56559b[_0x5e0e30(0x215)];throw new Error(_0x56559b['QMfcN']);}logger['info'](_0x56559b[_0x5e0e30(0x195)]),process[_0x5e0e30(0x21e)][_0x5e0e30(0x14d)]=_0x56559b[_0x5e0e30(0x18f)];let _0x564e86=0x0;const _0x585c35=async()=>{const _0x2d11a0=_0x5e0e30;_0x564e86++,_0x56559b[_0x2d11a0(0x1c5)](_0x564e86,0x1)&&await this['stopPercy']();};process['on'](_0x56559b[_0x5e0e30(0x18e)],_0x585c35);}catch(_0x417e04){process[_0x5e0e30(0x21e)][_0x5e0e30(0x14d)]=_0x56559b[_0x5e0e30(0x215)],logger[_0x5e0e30(0x180)](_0x5e0e30(0x122)+_0x417e04);throw new Error(_0x417e04[_0x5e0e30(0x191)]());}}async[a55_0x2f6a2c(0x1ba)](){const _0x263bf7=a55_0x2f6a2c,_0x5e77a8={};_0x5e77a8[_0x263bf7(0x179)]=_0x263bf7(0x219),_0x5e77a8['RIIXM']=_0x263bf7(0x13f);const _0x3bded6=_0x5e77a8;if(this[_0x263bf7(0x151)]&&this[_0x263bf7(0x151)][_0x263bf7(0x20f)]())try{await percyHelper[_0x263bf7(0x1ba)](this[_0x263bf7(0x151)]),logger[_0x263bf7(0x1a3)](_0x3bded6[_0x263bf7(0x179)]);}catch(_0x27f914){logger[_0x263bf7(0x166)](_0x3bded6['RIIXM'],_0x27f914[_0x263bf7(0x20b)]);}}async[a55_0x2f6a2c(0x18d)](){const _0x1679c7=a55_0x2f6a2c,_0x4d958d={};_0x4d958d[_0x1679c7(0x134)]=_0x1679c7(0x20c),_0x4d958d['ABxxs']=_0x1679c7(0x1b6);const _0x127096=_0x4d958d;if(helper[_0x1679c7(0x19a)]()&&helper['isTrue'](this[_0x1679c7(0x1f3)]['browserstackLocal'])&&(!this[_0x1679c7(0x1db)]||!this[_0x1679c7(0x1db)]['isRunning']()))try{if(this[_0x1679c7(0x1f3)][_0x1679c7(0x171)][_0x1679c7(0x1d2)]){logger[_0x1679c7(0x180)](_0x127096[_0x1679c7(0x134)]);return;}this[_0x1679c7(0x1db)]=await helper[_0x1679c7(0x18b)](this[_0x1679c7(0x1f3)]),logger[_0x1679c7(0x1a3)](_0x127096['ABxxs']);}catch(_0x3a98df){logger[_0x1679c7(0x180)](_0x3a98df);throw new Error(_0x3a98df['toString']());}}async['stopBrowserstackLocal'](){const _0xdb3a24=a55_0x2f6a2c,_0x1fff15={};_0x1fff15[_0xdb3a24(0x12f)]=_0xdb3a24(0x143),_0x1fff15['PMzjr']=_0xdb3a24(0x1ae);const _0x1e1269=_0x1fff15;if(this[_0xdb3a24(0x1db)]&&this[_0xdb3a24(0x1db)][_0xdb3a24(0x20f)]())try{await helper[_0xdb3a24(0x1c0)](this['browserstackLocal']),logger[_0xdb3a24(0x1a3)](_0x1e1269[_0xdb3a24(0x12f)]);}catch(_0x1a11c8){logger[_0xdb3a24(0x166)](_0x1e1269[_0xdb3a24(0x136)],_0x1a11c8['message']);}}async[a55_0x2f6a2c(0x16d)](){const _0x1933e4=a55_0x2f6a2c;return PerformanceTester['measureWrapper'](PerformanceAutEvents[_0x1933e4(0x162)],async()=>{const _0x1aef30=_0x1933e4;await hubAllocator[_0x1aef30(0x206)](this['config']);})();}async['setupTCGAuth'](){const _0x462ddd=a55_0x2f6a2c,_0x53c8d8={'nqpsz':function(_0x133561,_0x348062){return _0x133561(_0x348062);},'tuGPs':_0x462ddd(0x1e8),'SEoQm':function(_0x1ee505,_0x2dd5be,_0x5eaedf,_0x224e38,_0x6e8927,_0x55dbfe,_0x20b417){return _0x1ee505(_0x2dd5be,_0x5eaedf,_0x224e38,_0x6e8927,_0x55dbfe,_0x20b417);},'Omzpb':_0x462ddd(0x19e),'nrlqg':_0x462ddd(0x1e0),'iJwhA':function(_0x4310f4,_0x1df8de){return _0x4310f4(_0x1df8de);},'sicoi':_0x462ddd(0x216),'NGEMA':_0x462ddd(0x1c8),'hTDKJ':function(_0x28eeb3,_0x3358b8){return _0x28eeb3===_0x3358b8;},'gFEXH':'true','OLQFl':function(_0x63af3c,_0xe96ec){return _0x63af3c===_0xe96ec;},'UmdQJ':function(_0x24bdc9,_0x191061){return _0x24bdc9===_0x191061;},'tPtPg':_0x462ddd(0x1c2),'WQhuY':function(_0x4473f2,_0x47965c){return _0x4473f2===_0x47965c;},'fRCPq':_0x462ddd(0x150),'nvWwC':'Authentication\x20Failed.\x20Disabling\x20Healing\x20for\x20this\x20session.','MbSsj':function(_0x5ef357,_0x4c6642){return _0x5ef357(_0x4c6642);},'AvSej':_0x462ddd(0x17b),'vOLbK':function(_0x5f1c47,_0x4886da){return _0x5f1c47>=_0x4886da;},'hNrPZ':function(_0x154829,_0x16877d){return _0x154829<_0x16877d;},'ZtFOw':function(_0x2aa989,_0x10e44c){return _0x2aa989>=_0x10e44c;},'hbkhJ':'tcg\x20config\x20setup\x20successful.','WslTs':_0x462ddd(0x14e),'UVBbX':function(_0x2924bb){return _0x2924bb();}},_0x429c2b=PerformanceTester[_0x462ddd(0x165)](_0x53c8d8[_0x462ddd(0x1a4)],async()=>{const _0x3d730c=_0x462ddd;try{const _0x4bba84=new Date(),_0x5e9891=helper[_0x3d730c(0x208)](this['config']),_0x7a360=_0x53c8d8[_0x3d730c(0x12b)](require,path[_0x3d730c(0x173)](__dirname,_0x53c8d8['tuGPs'])),_0x2b1866=_0x53c8d8[_0x3d730c(0x1b2)](timeoutPromise,constants[_0x3d730c(0x197)],_0x53c8d8[_0x3d730c(0x1f9)],_0x53c8d8['nrlqg'],_0x4bba84,this['config'],this[_0x3d730c(0x1e4)]),_0x548b7f={'tcgUrl':constants[_0x3d730c(0x220)],'sdkVersion':_0x53c8d8['iJwhA'](require,_0x53c8d8[_0x3d730c(0x142)])[_0x3d730c(0x141)],'methodUsed':_0x53c8d8['NGEMA'],'proxyConfig':_0x5e9891,'os':os[_0x3d730c(0x1ec)]()};if(_0x5e9891&&_0x5e9891['proxyUrl']){utilities['fireFunnelTestEvent'](constants[_0x3d730c(0x12a)],_0x548b7f,this[_0x3d730c(0x1f3)],this[_0x3d730c(0x1e4)]);return;}const _0x4ed6ec={};_0x4ed6ec[_0x3d730c(0x13c)]=_0x5e9891;const _0x17a8da=await Promise[_0x3d730c(0x203)]([_0x7a360[_0x3d730c(0x1da)](this[_0x3d730c(0x1f3)][_0x3d730c(0x124)],this[_0x3d730c(0x1f3)][_0x3d730c(0x12d)],constants['TCG_URL'],_0x53c8d8[_0x3d730c(0x181)](require,_0x53c8d8[_0x3d730c(0x142)])[_0x3d730c(0x141)],_0x4ed6ec)['then'](_0x585713=>{const _0x5019af=_0x3d730c;return _0x2b1866[_0x5019af(0x145)](),_0x585713;}),_0x2b1866]);_0x17a8da[_0x3d730c(0x1a6)]=_0x53c8d8[_0x3d730c(0x1bf)](_0x17a8da[_0x3d730c(0x1a6)],_0x53c8d8['gFEXH'])||_0x53c8d8[_0x3d730c(0x1bf)](_0x17a8da[_0x3d730c(0x1a6)],!![]);const _0x6fa12d=_0x53c8d8[_0x3d730c(0x15d)](this[_0x3d730c(0x1f3)][_0x3d730c(0x175)],!![])||_0x53c8d8['UmdQJ'](this['config'][_0x3d730c(0x175)],_0x53c8d8[_0x3d730c(0x1aa)]);if(_0x53c8d8[_0x3d730c(0x15d)](_0x17a8da['message'],constants[_0x3d730c(0x1c7)])&&_0x6fa12d)logger['info'](_0x53c8d8[_0x3d730c(0x1ea)]);else{if(!_0x17a8da[_0x3d730c(0x1cf)]&&_0x53c8d8[_0x3d730c(0x16a)](_0x17a8da[_0x3d730c(0x1d0)],0x1f7)&&_0x6fa12d)logger['info'](_0x53c8d8['fRCPq']),utilities['fireFunnelTestEvent'](constants[_0x3d730c(0x13e)],_0x548b7f,this[_0x3d730c(0x1f3)],this[_0x3d730c(0x1e4)]);else{if(!_0x17a8da[_0x3d730c(0x1cf)]&&_0x6fa12d){logger[_0x3d730c(0x1a3)](_0x53c8d8['nvWwC']);const _0x4056bc={'tcgUrl':constants[_0x3d730c(0x220)],'sdkVersion':_0x53c8d8[_0x3d730c(0x161)](require,_0x53c8d8[_0x3d730c(0x142)])[_0x3d730c(0x141)],'methodUsed':_0x53c8d8[_0x3d730c(0x169)],'proxyConfig':_0x5e9891,'os':os['platform']()};utilities[_0x3d730c(0x17c)](constants['TCG_AUTH_FAILURE'],_0x4056bc,this[_0x3d730c(0x1f3)],this[_0x3d730c(0x1e4)]);}else{if(_0x17a8da[_0x3d730c(0x1cf)]&&!_0x17a8da[_0x3d730c(0x1a6)]&&_0x6fa12d)logger['info'](_0x53c8d8['AvSej']);else{if(_0x53c8d8[_0x3d730c(0x1c1)](_0x17a8da[_0x3d730c(0x1d0)],0xc8)&&_0x53c8d8[_0x3d730c(0x185)](_0x17a8da[_0x3d730c(0x1d0)],0x12c))utilities[_0x3d730c(0x17c)](constants[_0x3d730c(0x209)],_0x548b7f,this[_0x3d730c(0x1f3)],this[_0x3d730c(0x1e4)]);else{if(_0x53c8d8[_0x3d730c(0x12e)](_0x17a8da[_0x3d730c(0x1d0)],0x190))_0x548b7f['status']=_0x17a8da[_0x3d730c(0x1d0)],utilities[_0x3d730c(0x17c)](constants[_0x3d730c(0x174)],_0x548b7f,this['config'],this[_0x3d730c(0x1e4)]);else!_0x17a8da['status']&&utilities['fireFunnelTestEvent'](constants[_0x3d730c(0x14a)],_0x548b7f,this[_0x3d730c(0x1f3)],this[_0x3d730c(0x1e4)]);}}}}}if(_0x17a8da[_0x3d730c(0x1cf)]&&_0x17a8da[_0x3d730c(0x1a6)]){const _0x42099b={};_0x42099b[_0x3d730c(0x12c)]=_0x17a8da;const _0x169a07=_0x42099b;_0x5e9891&&(_0x169a07[_0x3d730c(0x218)]=_0x5e9891),_0x169a07[_0x3d730c(0x1e4)]=this[_0x3d730c(0x1e4)],_0x169a07['bstackConfig']=this['config'],helper[_0x3d730c(0x160)](_0x169a07),logger[_0x3d730c(0x180)](_0x53c8d8[_0x3d730c(0x147)]);}}catch(_0x1b1c88){logger[_0x3d730c(0x180)](_0x3d730c(0x15a)+(_0x1b1c88[_0x3d730c(0x20b)]?_0x1b1c88['message']:''));}});await _0x53c8d8[_0x462ddd(0x212)](_0x429c2b);}[a55_0x2f6a2c(0x21f)](){const _0x58c5cf=a55_0x2f6a2c,_0x9fc527={'XqPMj':function(_0x3c23aa,_0x6e2a1){return _0x3c23aa(_0x6e2a1);},'nhviZ':_0x58c5cf(0x15e)};_0x9fc527['XqPMj'](require,_0x9fc527[_0x58c5cf(0x1d1)])();}[a55_0x2f6a2c(0x17a)](){const _0x5a7ae6=a55_0x2f6a2c,_0x35fd05={};_0x35fd05[_0x5a7ae6(0x1c9)]=_0x5a7ae6(0x17d),_0x35fd05['WKVWt']='uncaughtException';const _0x2c9bae=_0x35fd05,_0xe22823=_0x1d1f30=>{const _0x3d014a=_0x5a7ae6;logger[_0x3d014a(0x166)](_0x1d1f30[_0x3d014a(0x20b)]),logger[_0x3d014a(0x180)](util[_0x3d014a(0x198)](_0x1d1f30)),this[_0x3d014a(0x15b)][_0x3d014a(0x186)](util[_0x3d014a(0x198)]('%j',_0x1d1f30)),PerformanceTester['captureError'](_0x1d1f30);};process['on'](_0x2c9bae[_0x5a7ae6(0x1c9)],_0xe22823),process['on'](_0x2c9bae[_0x5a7ae6(0x129)],_0xe22823);}async[a55_0x2f6a2c(0x156)](_0xc91b0c){const _0x377ad2=a55_0x2f6a2c,_0x5331a4={};_0x5331a4[_0x377ad2(0x183)]='4|2|1|0|3',_0x5331a4[_0x377ad2(0x1c6)]=function(_0x1f8f98,_0x83c8e5){return _0x1f8f98+_0x83c8e5;},_0x5331a4['SAULi']=_0x377ad2(0x200),_0x5331a4[_0x377ad2(0x172)]=function(_0x244e0b,_0x48f983){return _0x244e0b+_0x48f983;},_0x5331a4[_0x377ad2(0x1cd)]=_0x377ad2(0x1ca);const _0x1a65b3=_0x5331a4,_0x4b0148=_0x1a65b3['zKnsS'][_0x377ad2(0x1af)]('|');let _0x50334f=0x0;while(!![]){switch(_0x4b0148[_0x50334f++]){case'0':this[_0x377ad2(0x1e7)]=_0xc91b0c;continue;case'1':logger[_0x377ad2(0x1a3)](_0x1a65b3[_0x377ad2(0x1c6)](_0x1a65b3[_0x377ad2(0x1bc)],_0xc91b0c));continue;case'2':this[_0x1a65b3['AUHGL'](_0x1a65b3['diUZO'],_0xc91b0c)]=!![];continue;case'3':await TestHubHandler['stop'](_0xc91b0c);continue;case'4':if(this[_0x1a65b3['AUHGL'](_0x1a65b3['diUZO'],_0xc91b0c)])return;continue;}break;}}['exitHandler'](){const _0x11bee0=a55_0x2f6a2c,_0x4578ef={};_0x4578ef[_0x11bee0(0x120)]=function(_0x2891f4,_0x49db29){return _0x2891f4===_0x49db29;},_0x4578ef[_0x11bee0(0x135)]='Calling\x20Build\x20Stop\x20from\x20ExitHandler',_0x4578ef[_0x11bee0(0x125)]=function(_0x2189c8,_0x1acde2){return _0x2189c8>_0x1acde2;},_0x4578ef[_0x11bee0(0x1b7)]=_0x11bee0(0x217);const _0x319b72=_0x4578ef;let _0x2c9103=0x0;return async()=>{const _0x5ee1e5=_0x11bee0;_0x2c9103++;if(_0x319b72[_0x5ee1e5(0x120)](_0x2c9103,0x1)){helper[_0x5ee1e5(0x1ed)](this['framework'])&&await this[_0x5ee1e5(0x1b3)]();try{logger[_0x5ee1e5(0x180)](_0x319b72[_0x5ee1e5(0x135)]),await TestHubHandler[_0x5ee1e5(0x1fa)](_0x2c9103);}catch(_0xa026cd){logger['debug']('Error\x20in\x20sending\x20testhub\x20stop:\x20'+util[_0x5ee1e5(0x198)](_0xa026cd));}PerformanceTester[_0x5ee1e5(0x182)](PerformanceEvents['SDK_CLEANUP']);if(PerformanceTester['isEnabled']()){const {measures:_0x1f9db2,errors:_0x2f6812}=await PerformanceTester[_0x5ee1e5(0x1b4)](),_0x457f50={};if(_0x1f9db2&&_0x319b72['mxsXU'](_0x1f9db2['length'],0x0)||_0x2f6812&&_0x319b72[_0x5ee1e5(0x125)](_0x2f6812[_0x5ee1e5(0x20e)],0x0)){const _0x405900={};_0x405900[_0x5ee1e5(0x1b5)]=_0x1f9db2,_0x405900[_0x5ee1e5(0x20a)]=_0x2f6812,Object[_0x5ee1e5(0x159)](_0x457f50,_0x405900);}try{const _0x2afdea=await helper[_0x5ee1e5(0x1a8)](_0x457f50,this[_0x5ee1e5(0x1f3)]);logger['debug'](_0x5ee1e5(0x192)+constants[_0x5ee1e5(0x1e1)]+'\x20with\x20response\x20'+_0x2afdea[_0x5ee1e5(0x176)]);}catch(_0x5ce3f1){logger[_0x5ee1e5(0x180)](_0x5ee1e5(0x148)+constants[_0x5ee1e5(0x1e1)]+'\x20with\x20error\x20'+util[_0x5ee1e5(0x198)](_0x5ce3f1));}try{fs[_0x5ee1e5(0x132)](_0x319b72[_0x5ee1e5(0x1b7)],JSON[_0x5ee1e5(0x14c)](_0x457f50));}catch(_0x3846a3){logger[_0x5ee1e5(0x180)](_0x5ee1e5(0x1a1)+_0x3846a3);}}}};}}function a55_0x72f1(){const _0x5ba7bb=['turboScaleUrl','toLowerCase','UVBbX','QiOUL','requireSeleniumWebdriverCheck','NpdAD','../../package.json','log/events.json','proxyConfig','Percy\x20stopped','akBoc','SIGABRT','AUTOLOGCAPTURE_NOTIFICATION','./performance/constants','env','setupKeepAlive','TCG_URL','ovFLK','3304400eUzcRr','snFrt','Mmxcm','false','Error\x20in\x20percy\x20setup\x20','QaHzy','accessKey','mxsXU','SIGHUP','HUB\x20URL\x20SET\x20TO\x20TurboScale\x20HUB\x20-\x20','1551810xjfvlv','WKVWt','AI_PROXY_FAILURE','nqpsz','tcgAuthConfig','userName','ZtFOw','ZMNQi','setHandlePWError','OKSRG','writeFileSync','selenium-webdriver','AjZnN','Tlgwv','PMzjr','getTurboScaleGridDetails','../hubAllocationMethods','readConfig','winstonLogger','envConfig','proxy','948474urZodw','TCG_DOWN','Error\x20occured\x20while\x20stopping\x20percy','qrnzS','version','sicoi','Local\x20binary\x20stopped','default','cancel','kCCfL','hbkhJ','Failed\x20to\x20send\x20data\x20to\x20','skipSessionName','INVALID_INIT_RESP_WITH_USER_IMPACT','./performance/performance-tester','stringify','BROWSERSTACK_PERCY','aiHeal:tcgAuth','exitHandler','Something\x20went\x20wrong.\x20Disabling\x20healing\x20for\x20this\x20session.\x20Please\x20try\x20again\x20later.','percy','lgBuL','parallelsPerPlatform\x20was\x20ignored\x20as\x20platforms\x20object\x20was\x20not\x20defined','ats-repeater','errorMessage','intExitHandler','path','eXqvK','assign','Error\x20in\x20setting\x20up\x20tcg\x20authconfig.\x20Error:\x20','unhandledErrors','isTrialGrid','OLQFl','./setKeepAlive','300286DTlQAH','setupTcgConfigFile','MbSsj','HUB_MANAGEMENT','getFinalCaps','customRepeaters','measureWrapper','error','hQAem','isUndefined','NGEMA','WQhuY','PXKNa','useW3C','setUpHubUrl','integrations','YkaxC','IHoBF','browserStackLocalOptions','AUHGL','join','AI_INIT_FAILURE','selfHeal','statusCode','initialize','parallelsPerPlatform','mRiyh','handleExceptions','Healing\x20is\x20not\x20enabled\x20for\x20your\x20group,\x20please\x20contact\x20the\x20admin','fireFunnelTestEvent','unhandledRejection','includes','getPackageVersion','debug','iJwhA','end','zKnsS','KIkco','hNrPZ','push','userName\x20or\x20accessKey\x20is\x20not\x20defined','playwrightUrl','4246bZvtpS','getUserName','startLocalBinary','WIsUN','setupBrowserstackLocal','sekin','GkdHs','turboScale','toString','Data\x20sent\x20successfully\x20to\x20','TjqCj','isTrue','AdulY','QmptU','TCG_AUTH_TIMEOUT','format','aSDUu','isBrowserstackInfra','?caps=','getAccessKey','disableAutoCaptureLogs','BrowserstackHealing.init\x20method\x20timed\x20out','bind','custom-repeater','Error\x20in\x20writing\x20events\x20to\x20file\x20','./helper','info','WslTs','dgaPJ','isHealingEnabled','localIdentifier','sendToEDS','getConfigPath','gFEXH','Percy\x20started\x20successfully','forceLocal','tuAmj','Error\x20occured\x20while\x20stopping\x20local\x20binary','split','testContextOptions','RBTre','SEoQm','stopBrowserstackLocal','finalize','measures','Local\x20binary\x20started\x20successfully','lDQTt','Few\x20SDK\x20features\x20were\x20not\x20activated\x20as\x20platforms\x20object\x20was\x20not\x20defined','nJcoj','stopPercy','setEnvCaps','SAULi','platforms','No\x20config\x20provided.','hTDKJ','stopLocalBinary','vOLbK','Please\x20upgrade\x20Browserstack\x20SDK\x20to\x20the\x20latest\x20version\x20to\x20use\x20the\x20self-healing\x20feature.','6BbuaLt','url','ZgCGw','tmFZY','UPGRADE_REQUIRED','BrowserstackHealing.init','pEiFB','handled','QiBFz','./percy/utils','diUZO','1067250XyQFrE','isAuthenticated','status','nhviZ','skipBinaryInitialisation','cFdjk','cliConfig','./testhub/utils','turboScaleGridDetails','playwright','setBrowserstackInfraFromConfig','getHubUrl','init','browserstackLocal','sdkRunID','hubUrl','constructor','beforeExit','BrowserstackHealingInitFailed','EDS_URL','uuid','setLogLevel','framework','19|28|33|26|27|21|37|5|4|42|16|0|31|15|32|38|29|18|41|30|9|22|10|36|11|2|8|17|13|7|3|35|25|34|14|20|1|39|23|24|40|6|12','codeceptjs','killSignal','../ai-sdk-node/bundle','true','tPtPg','71104YRLtzS','platform','checkStopLocalBinaryOnExit','./ats/helper','getLocalIdentifier','SDKTestAttempted','SIGTERM','4.5.0','config','cYgJT','BROWSERSTACK_TURBOSCALE','Could\x20not\x20start\x20percy,\x20check\x20percy\x20logs\x20for\x20info.','SIGQUIT','FRAMEWORK','Omzpb','stop','fznFR','generateLocalIdentifier','startPercy','Error\x20in\x20Fire\x20SDKTestAttempted.\x20Stacktrace:\x20','162HmnYwt','Shutdown\x20triggered\x20by\x20','sanitizeCaps','setProxySettings','race','../bin/utils/constants','cyqqA','allocateHub','util','getProxyConfigForTcg','AI_INIT_SUCCESSFUL','exceptions','message','Local\x20binary\x20not\x20started\x20as\x20skipBinaryInitialisation\x20is\x20enabled','BlECv','length','isRunning'];a55_0x72f1=function(){return _0x5ba7bb;};return a55_0x72f1();}exports[a55_0x2f6a2c(0x144)]=BrowserStackSetup;