#!/usr/bin/env node

const a45_0x519fb0=a45_0x43e9;(function(_0x266f3a,_0x3ba132){const _0x558e0b=a45_0x43e9,_0x51930d=_0x266f3a();while(!![]){try{const _0x4d55b7=-parseInt(_0x558e0b(0xd3))/0x1+-parseInt(_0x558e0b(0xee))/0x2+parseInt(_0x558e0b(0xd5))/0x3+parseInt(_0x558e0b(0xcb))/0x4+parseInt(_0x558e0b(0xfa))/0x5*(-parseInt(_0x558e0b(0xdc))/0x6)+parseInt(_0x558e0b(0xef))/0x7+parseInt(_0x558e0b(0xfb))/0x8;if(_0x4d55b7===_0x3ba132)break;else _0x51930d['push'](_0x51930d['shift']());}catch(_0x598b9d){_0x51930d['push'](_0x51930d['shift']());}}}(a45_0x16f8,0x27f89));const fs=require('fs'),helper=require(a45_0x519fb0(0x10b)),utilities=require(a45_0x519fb0(0x10c)),yaml=require('js-yaml'),yargs=require(a45_0x519fb0(0x10a)),logger=require(a45_0x519fb0(0xe6))[a45_0x519fb0(0xf2)],configFileTemplate=__dirname+'/../../browserstack.yml.sample',configFileTemplatePW=__dirname+a45_0x519fb0(0x105),configFile=process['cwd']()+'/browserstack.yml',packageFile=process[a45_0x519fb0(0xf7)]()+'/package.json',frameworks=['mocha',a45_0x519fb0(0xd6),'cucumber-js',a45_0x519fb0(0xf6),a45_0x519fb0(0x103),a45_0x519fb0(0x104),'playwright'];let config;logger['info'](a45_0x519fb0(0xf0)),createConfigurationFile(yargs['argv'][a45_0x519fb0(0x101)],yargs[a45_0x519fb0(0xe4)][a45_0x519fb0(0xda)],yargs['argv'][a45_0x519fb0(0xf1)]);function a45_0x43e9(_0x585ad2,_0x4136f3){const _0x16f8b9=a45_0x16f8();return a45_0x43e9=function(_0x43e985,_0x472c00){_0x43e985=_0x43e985-0xca;let _0x26a8ce=_0x16f8b9[_0x43e985];return _0x26a8ce;},a45_0x43e9(_0x585ad2,_0x4136f3);}try{sdkSetup();}catch(a45_0x387430){logger[a45_0x519fb0(0xff)](a45_0x519fb0(0x108)+a45_0x387430);}addScriptInPackageJson();function a45_0x16f8(){const _0x2c5fc4=['YOUR_ACCESS_KEY','key','bmZfE','1337814ehaMEN','cjIrp','pwZXX','YOUR_USERNAME','FdQrj','FiehB','qppJD','XvEJX','argv','utf8','../helpers/logger','includes','iQOGc','HlqnC','FrWfU','HqiEF','error','jUdBA','578848AfLAKp','2215829FhgMRO','Creating\x20configuration\x20file...','playwright','winstonLogger','writeFileSync','KteHp','parse','node','cwd','rrozn','fireFunnelTestEvent','5fyASoq','1763416nJhTQN','push','rsPiG','isUndefined','debug','DEAIV','username','length','nightwatch','codeceptjs','/../../browserstack.pw.yml.sample','entries','SDKSetup','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','\x20&&\x20npm\x20update\x20browserstack-node-sdk','yargs','../helpers/helper','../helpers/utilities','browserstack-node-sdk','-browserstack','571324inBxhR','join','indexOf','Setup\x20completed','WtwvU','splice','fzJwU','lYfLt','295204LfKKnC','split','874539dGLGAF','jest','stringify','scripts'];a45_0x16f8=function(){return _0x2c5fc4;};return a45_0x16f8();}function createConfigurationFile(_0xc4342a,_0xf4630a,_0x4c35c4=![]){const _0x4923e3=a45_0x519fb0,_0x2c47a1={};_0x2c47a1[_0x4923e3(0xe2)]=_0x4923e3(0xe5),_0x2c47a1[_0x4923e3(0xeb)]=_0x4923e3(0xdf),_0x2c47a1['XvEJX']=_0x4923e3(0xd9);const _0x24d74f=_0x2c47a1;try{let _0x5d7b17=fs['readFileSync'](_0x4c35c4?configFileTemplatePW:configFileTemplate,_0x24d74f[_0x4923e3(0xe2)]);_0xc4342a&&(_0x5d7b17=_0x5d7b17['replace'](_0x24d74f[_0x4923e3(0xeb)],_0xc4342a)),_0xf4630a&&(_0x5d7b17=_0x5d7b17['replace'](_0x24d74f[_0x4923e3(0xe3)],_0xf4630a)),config=yaml['load'](_0x5d7b17),fs[_0x4923e3(0xf3)](configFile,_0x5d7b17,_0x5a14d9=>{const _0x44b1f0=_0x4923e3;_0x5a14d9&&logger[_0x44b1f0(0xec)](_0x5a14d9);});}catch(_0x14be13){logger[_0x4923e3(0xec)](_0x14be13);}}function addPostInstallScript(_0x450fe2,_0x39f2eb){const _0x1c5d14=a45_0x519fb0,_0x658d59={};_0x658d59[_0x1c5d14(0xd1)]='postinstall',_0x658d59['iQOGc']='npm\x20update\x20browserstack-node-sdk',_0x658d59['FrWfU']=_0x1c5d14(0x109);const _0x4ddf3c=_0x658d59;let _0x3a3bb1=_0x450fe2[_0x4ddf3c[_0x1c5d14(0xd1)]];if(_0x3a3bb1&&_0x3a3bb1[_0x1c5d14(0xe7)](_0x4ddf3c[_0x1c5d14(0xe8)]))return;!_0x3a3bb1?_0x3a3bb1=_0x4ddf3c[_0x1c5d14(0xe8)]:_0x3a3bb1+=_0x4ddf3c[_0x1c5d14(0xea)],_0x39f2eb[_0x1c5d14(0xfc)]([_0x4ddf3c['fzJwU'],_0x3a3bb1]);}function addScriptInPackageJson(){const _0x4ceed9=a45_0x519fb0,_0xe99fe1={'rsPiG':'utf8','bmZfE':function(_0x894483,_0x5d93ed){return _0x894483<_0x5d93ed;},'sznvT':function(_0xa89906,_0x17f09c,_0x4954da){return _0xa89906(_0x17f09c,_0x4954da);},'FdQrj':function(_0x4ab855,_0x34bc62,_0x412fb5){return _0x4ab855(_0x34bc62,_0x412fb5);},'rrozn':function(_0x365436,_0x2a2721){return _0x365436<_0x2a2721;},'pwZXX':function(_0x22841d,_0x58a0ab){return _0x22841d!==_0x58a0ab;},'FiehB':'Adding\x20new\x20script(s)\x20in\x20package.json...'},_0x92d922=JSON[_0x4ceed9(0xf5)](fs['readFileSync'](packageFile,_0xe99fe1[_0x4ceed9(0xfd)])),_0x26c32a=[];for(let _0x4b163b=0x0;_0xe99fe1[_0x4ceed9(0xdb)](_0x4b163b,frameworks[_0x4ceed9(0x102)]);_0x4b163b+=0x1){const _0x3be4f9=_0xe99fe1['sznvT'](findScriptsWithFramework,_0x92d922[_0x4ceed9(0xd8)],frameworks[_0x4b163b]);for(let _0x1776f8=0x0;_0xe99fe1[_0x4ceed9(0xdb)](_0x1776f8,_0x3be4f9[_0x4ceed9(0x102)]);_0x1776f8+=0x1){_0x26c32a[_0x4ceed9(0xfc)](_0xe99fe1['sznvT'](getUpdatedCommand,_0x92d922[_0x4ceed9(0xd8)],_0x3be4f9[_0x1776f8]));}_0xe99fe1[_0x4ceed9(0xe0)](addPostInstallScript,_0x92d922['scripts'],_0x26c32a);}const _0x5dc1d3={..._0x92d922[_0x4ceed9(0xd8)]},_0x16403c=_0x5dc1d3;for(let _0x13674a=0x0;_0xe99fe1[_0x4ceed9(0xf8)](_0x13674a,_0x26c32a[_0x4ceed9(0x102)]);_0x13674a+=0x1){_0x16403c[_0x26c32a[_0x13674a][0x0]]=_0x26c32a[_0x13674a][0x1];}_0xe99fe1[_0x4ceed9(0xde)](JSON[_0x4ceed9(0xd7)](_0x92d922['scripts']),JSON['stringify'](_0x16403c))&&(logger['info'](_0xe99fe1[_0x4ceed9(0xe1)]),_0x92d922[_0x4ceed9(0xd8)]=_0x16403c,fs['writeFileSync'](packageFile,JSON['stringify'](_0x92d922,null,0x2),_0x439dba=>{_0x439dba&&logger['error'](_0x439dba);}));};function findScriptsWithFramework(_0x2fd6f4,_0x1cf739){const _0x54222a=a45_0x519fb0,_0x34c643={};_0x34c643['lYfLt']=function(_0x28b822,_0x50aea7){return _0x28b822<_0x50aea7;},_0x34c643[_0x54222a(0xf4)]=_0x54222a(0x10d);const _0x26b5d0=_0x34c643,_0x4be55e=[],_0x399b49=Object[_0x54222a(0x106)](_0x2fd6f4);for(let _0xaef6de=0x0;_0x26b5d0[_0x54222a(0xd2)](_0xaef6de,_0x399b49[_0x54222a(0x102)]);_0xaef6de+=0x1){_0x399b49[_0xaef6de][0x1][_0x54222a(0xe7)](_0x1cf739)&&!_0x399b49[_0xaef6de][0x1][_0x54222a(0xe7)](_0x26b5d0['KteHp'])&&_0x4be55e[_0x54222a(0xfc)](_0x399b49[_0xaef6de][0x0]);}return _0x4be55e;}function getUpdatedCommand(_0x41100b,_0x579c56){const _0x3863e8=a45_0x519fb0,_0x57871d={};_0x57871d['cjIrp']=function(_0x12a0d6,_0x323749){return _0x12a0d6!==_0x323749;},_0x57871d[_0x3863e8(0xe9)]=_0x3863e8(0x10d),_0x57871d[_0x3863e8(0xcf)]=function(_0x20f89b,_0x25b146){return _0x20f89b===_0x25b146;};const _0x14d429=_0x57871d,_0x2dfeb7=_0x579c56+_0x3863e8(0xca),_0x4a8cb1=_0x41100b[_0x579c56],_0x4f249c=_0x4a8cb1[_0x3863e8(0xd4)]('\x20');for(const _0x491505 of frameworks){if(_0x14d429[_0x3863e8(0xdd)](_0x4f249c[_0x3863e8(0xcd)](_0x491505),-0x1)){_0x4f249c[_0x3863e8(0xd0)](_0x4f249c[_0x3863e8(0xcd)](_0x491505),0x0,_0x14d429[_0x3863e8(0xe9)]);break;}}let _0x53d9e7=_0x4f249c[_0x3863e8(0xcc)]('\x20');return _0x14d429['WtwvU'](_0x53d9e7,_0x4a8cb1)&&(_0x53d9e7='browserstack-node-sdk\x20'+_0x4a8cb1),[_0x2dfeb7,_0x53d9e7];}function sdkSetup(){const _0x3305ca=a45_0x519fb0,_0x1f1129={};_0x1f1129[_0x3305ca(0xed)]='node-setup',_0x1f1129[_0x3305ca(0x100)]=_0x3305ca(0x107);const _0x41e5bc=_0x1f1129;if(helper[_0x3305ca(0xfe)](config))return;config['source']=_0x41e5bc[_0x3305ca(0xed)];try{utilities[_0x3305ca(0xf9)](_0x41e5bc['DEAIV'],{},config,'');}catch(_0xf1591f){logger[_0x3305ca(0xff)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+_0xf1591f);}}logger['info'](a45_0x519fb0(0xce));